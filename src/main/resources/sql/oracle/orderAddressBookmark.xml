<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="eorder.orderAddressBookmark">
	<insert id="in" parameterType="hashmap">
		INSERT INTO ORDERADDRESSBOOKMARK(
			OAB_SEQ, 
			OAB_USERID,
			OAB_ZIPCD,
			OAB_ADD1,
			OAB_ADD2,
			OAB_TEL1,
			OAB_TEL2,
			OAB_RECEIVER,
			OAB_INID,
			OAB_INDATE
		)VALUES(
			USQ_ORDERADDRESSBOOKMARK.NEXTVAL
			, #{m_oabuserid, jdbcType=VARCHAR}
			, #{m_oabzipcd, jdbcType=VARCHAR}
			, #{m_oabadd1, jdbcType=VARCHAR}
			, #{m_oabadd2, jdbcType=VARCHAR}
			, #{m_oabtel1, jdbcType=VARCHAR}
			, #{m_oabtel2, jdbcType=VARCHAR}
			, #{m_oabreceiver, jdbcType=VARCHAR}
			, #{m_oabinid, jdbcType=VARCHAR}
			, SYSDATE
		)
	</insert>
	
	<delete id="del" parameterType="hashmap">
		DELETE FROM ORDERADDRESSBOOKMARK
		<where>
			OAB_SEQ = #{r_oabseq}
			<if test="r_oabuserid != null and r_oabuserid != '' ">AND OAB_USERID = #{r_oabuserid}</if>
		</where>
	</delete>
	
	<delete id="delByArr" parameterType="hashmap">
		DELETE FROM ORDERADDRESSBOOKMARK
		<where>
			AND OAB_SEQ IN <foreach collection="ri_oabseq" item="oabseq" separator="," open="(" close=")">#{oabseq}</foreach>
			<if test="r_oabuserid != null and r_oabuserid != '' ">AND OAB_USERID = #{r_oabuserid}</if>
		</where>
	</delete>
	
	<select id="one" parameterType="hashmap" resultType="hashmap">
		SELECT OAB.* 
		FROM ORDERADDRESSBOOKMARK OAB
		<where>
			<if test="r_oabseq != null and r_oabseq != '' ">AND OAB_SEQ = #{r_oabseq}</if>
			<if test="r_oabuserid != null and r_oabuserid != '' ">AND OAB_USERID = #{r_oabuserid}</if>
		</where>
	</select>
	
	<select id="cnt" parameterType="hashmap" resultType="int">
		SELECT COUNT(*) FROM ORDERADDRESSBOOKMARK OAB
		<where>
			<if test="r_oabseq != null and r_oabseq != '' ">AND OAB_SEQ = #{r_oabseq}</if>
			<if test="r_oabuserid != null and r_oabuserid != '' ">AND OAB_USERID = #{r_oabuserid}</if>
		</where>
	</select>
	
	<select id="list" parameterType="hashmap" resultType="hashmap">
		SELECT * FROM (SELECT ROWNUM RR, XX.* FROM (
		
		
		SELECT OAB.* 
		FROM ORDERADDRESSBOOKMARK OAB
		<where>
			<if test="r_oabseq != null and r_oabseq != '' ">AND OAB_SEQ = #{r_oabseq}</if>
			<if test="r_oabuserid != null and r_oabuserid != '' ">AND OAB_USERID = #{r_oabuserid}</if>
		</where>
		
		
		<if test=" r_orderby != null and r_orderby != '' ">ORDER BY ${r_orderby}</if>
		) XX 
		<where>
			<if test="r_endrow != null and r_endrow != ''"><![CDATA[ROWNUM <= #{r_endrow}]]></if>		
		</where> )
		<where>
			<if test="r_startrow != null and r_startrow != ''"><![CDATA[RR >= #{r_startrow}]]></if>
		</where>
	</select>
	
</mapper>