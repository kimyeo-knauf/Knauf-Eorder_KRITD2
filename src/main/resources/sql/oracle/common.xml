<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="eorder.common">
	
	<select id="getHolyDayList" parameterType="hashmap" resultType="hashmap">
		SELECT * FROM (SELECT ROWNUM RR, XX.* FROM (
		
		SELECT YYYYMMDD
		FROM O_DATE
		<where>
			AND HOLIDAY_YN = 'Y'
			<if test="r_yyyymmdd != null and r_yyyymmdd != '' ">AND YYYYMMDD <![CDATA[>=]]> #{r_yyyymmdd}</if>
		</where>
		 
		<if test=" r_orderby != null and r_orderby != '' ">ORDER BY ${ r_orderby }</if>
		) XX 
		<where>
			<if test="r_endrow != null and r_endrow != ''"><![CDATA[ROWNUM <= #{r_endrow}]]></if>		
		</where> )
		<where>
			<if test="r_startrow != null and r_startrow != ''"><![CDATA[RR >= #{r_startrow}]]></if>
		</where>
	</select>
	
	<select id="getOrderWeekList" parameterType="hashmap" resultType="hashmap">
		<!-- SELECT UDC.DRSY, UDC.DRRT, UDC.DRKY, UDC.DRDL01, UDC.DRDL02, SUBSTR(UDC.DRSPHD,3,2) AS DRSPHD, UDC.DRUDCO, UDC.DRHRDC
		FROM O_F0005 UDC
		<where>
			AND UDC.DRSY = RPAD(TRIM('40'), 4, ' ')
			AND UDC.DRRT = RPAD(TRIM('PM'), 2, ' ')
			AND UDC.DRSPHD <![CDATA[<>]]> '          '
		</where> 
		ORDER BY UDC.DRKY -->
		
		SELECT UDC.DRKY, UDC.DRDL01
		FROM O_F0005 UDC
		ORDER BY UDC.DRKY
		
	</select>
	
	<!-- <select id="getItemStock" parameterType="hashmap" resultType="hashmap">
		SELECT c.IMLITM AS ITEM_CD, Trim(A.LIMCU) AS MCU_CD
			, CASE C.PRI_UNIT 
			WHEN 'SM' THEN
				CASE C.IMLITM WHEN '143002' THEN
					Trunc((SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / Decode(C.CONVERSE,null,1,F.CONVERSE )) / 100, 2)
				ELSE
					Trunc((SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / Decode(C.CONVERSE,null,1,C.CONVERSE )) / 100, 2)
				END
			WHEN 'SH' THEN
				CASE C.IMLITM WHEN '243002' THEN
					Trunc((SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / Decode(C.CONVERSE,null,1,F.CONVERSE )) / 100, 2)
				ELSE
					Trunc(SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / 100, 2)
              	END
			WHEN 'KG' THEN
				Trunc((SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo) / Decode(D.CONVERSE,null,1,D.CONVERSE )) / 100, 2)
			WHEN 'BX' THEN 
				Trunc((SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / Decode(F.CONVERSE,null,1,F.CONVERSE )) / 100, 2)
			WHEN 'BK' THEN 
				Trunc((SUM(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / Decode(F.CONVERSE,null,1,F.CONVERSE )) / 100, 2)
			ELSE Trunc((Sum(LIPQOH-lipcom-lihcom-lifun1-liqowo)  / C.CONVERSE) / 100, 2)
			END TOT_AVAIL
		FROM PRODLGKDTA.F41021@LGKEORDER A 
		INNER JOIN (
			SELECT a.IMITM, a.IMLITM, b.umum
				, CASE WHEN IMLITM LIKE '143%' OR IMLITM LIKE '247001%' THEN 'BX'
				WHEN IMLITM LIKE '243%' OR IMLITM LIKE '24E00%' THEN 'BX'
				ELSE A.IMUOM1 END AS pri_unit
				, (b.umconv / 10000000) AS CONVERSE
          	FROM PRODLGKDTA.F4101@LGKEORDER a, PRODLGKDTA.F41002@LGKEORDER b
			<where>
				AND a.imitm = b.umitm  AND umustr = '1'
				AND Trim(imlitm) = '${r_itemcd}'
			</where>
		) C ON A.LIITM = C.IMITM
		LEFT OUTER JOIN (
			SELECT a.IMITM, a.IMLITM, b.umum, a.imuom1, a.imuom2
				, CASE A.IMSRP1 WHEN 'B' THEN
					CASE A.IMSRP2 WHEN '10' THEN (b.umconv / 10000)
					ELSE (b.umconv / 10000000)
                    END
				ELSE (b.umconv / 10000000)
				END CONVERSE
			FROM PRODLGKDTA.F4101@LGKEORDER a, PRODLGKDTA.F41002@LGKEORDER b
			<where>
				AND a.imitm = b.umitm
				AND Trim(imlitm) = '${r_itemcd}' 
				AND b.umum = 'KG'
			</where>
		) D ON A.LIITM = D.IMITM
		LEFT OUTER JOIN (
			SELECT a.IMITM, a.IMLITM, b.umum, (b.umcnv1 / 10000000) AS CONVERSE
			FROM PRODLGKDTA.F4101@LGKEORDER a, PRODLGKDTA.F41002@LGKEORDER b
			<where>
				AND a.imitm = b.umitm
				AND Trim(imlitm) = '${r_itemcd}'
				AND b.umum = 'BX'
			</where>
		) F ON A.LIITM = F.IMITM
		<where>
			AND Trim(limcu) = '${r_mcucd}' 
		</where>
		GROUP BY c.IMLITM, A.LIMCU, c.pri_unit, C.CONVERSE, D.CONVERSE, F.CONVERSE
	</select>
	
	<select id="getItemStock2" parameterType="hashmap" resultType="hashmap">
		SELECT * FROM V_AVAIL WHERE IMLITM = #{r_itemcd} and LIMCU = #{r_mcucd}
	</select>
	
	<select id="getCustVAcount" parameterType="hashmap" resultType="hashmap">
		SELECT * FROM V_ACCOUNT
		<where>
			<if test="r_ayan8 != null and r_ayan8 != ''">AYAN8 = #{r_ayan8}</if>
		</where>
	</select> -->
</mapper>